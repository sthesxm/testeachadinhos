<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- üîÅ PARAM: [BRAND_NAME] -->
  <title>[BRAND_NAME]</title>
  <link rel="preconnect" href="https://sndflw.com" crossorigin>

  <!-- Meta Pixel (dedupe PageView 1x por sess√£o + Advanced Matching) -->
  <script>
  !function(f,b,e,v,n,t,s){
    if(f.fbq) return;
    n=f.fbq=function(){ n.callMethod? n.callMethod.apply(n,arguments):n.queue.push(arguments) };
    if(!f._fbq) f._fbq=n;
    n.push=n; n.loaded=!0; n.version='2.0';
    n.queue=[];
    t=b.createElement(e); t.async=!0; t.src=v;
    s=b.getElementsByTagName(e)[0]; s.parentNode.insertBefore(t,s);
  }(window, document,'script','https://connect.facebook.net/en_US/fbevents.js');

  (function initPixelWithAdvancedMatching(){
    // üîÅ PARAM: [PIXEL_ID]
    var PIXEL_ID = '[PIXEL_ID]'; // [PIXEL_ID]

    function getParamOrStorage(key, storageKey){
      var params = new URLSearchParams(location.search);
      return params.get(key) || localStorage.getItem(storageKey || key) || '';
    }
    function normEmail(v){ return (v||'').toString().trim().toLowerCase(); }
    function normPhone(v){ return (v||'').toString().replace(/\D+/g,''); }

    try{
      var em = normEmail(getParamOrStorage('em','am_em'));
      var ph = normPhone(getParamOrStorage('ph','am_ph'));

      var advMatch = {};
      if (em) advMatch.em = em;
      if (ph) advMatch.ph = ph;

      fbq('init', PIXEL_ID, advMatch);
      fbq('set', 'autoConfig', false, PIXEL_ID);
    }catch(e){
      fbq('init', PIXEL_ID);
      fbq('set', 'autoConfig', false, PIXEL_ID);
    }
  })();

  (function sendPageViewOnce(){
    var nav = performance.getEntriesByType && performance.getEntriesByType('navigation')[0];
    var isBFCache = nav && nav.type === 'back_forward';
    var PV_KEY = 'pv_sent:' + location.pathname + ':' + (new Date()).toDateString();

    function cryptoRandomId(){
      var a = (self.crypto||{}).getRandomValues ? crypto.getRandomValues(new Uint8Array(16)) : Array.from({length:16},()=>Math.random()*256|0);
      a[6] = (a[6] & 0x0f) | 0x40;
      a[8] = (a[8] & 0x3f) | 0x80;
      var h = Array.from(a, b=>('0'+b.toString(16)).slice(-2)).join('');
      return h.slice(0,8)+'-'+h.slice(8,12)+'-'+h.slice(12,16)+'-'+h.slice(16,20)+'-'+h.slice(20);
    }

    function firePV(){
      if (sessionStorage.getItem(PV_KEY)) return;
      sessionStorage.setItem(PV_KEY, '1');
      try {
        // ‚úÖ PageView mantido
        fbq('track','PageView', {}, { eventID: 'pv-' + cryptoRandomId() });
      } catch(e){}
    }

    if (document.prerendering) {
      document.addEventListener('prerenderingchange', function(){
        if (!isBFCache) firePV();
      }, { once:true });
    } else {
      if (!isBFCache) firePV();
    }
  })();
  </script>
  <!-- End Meta Pixel -->

  <style>
    :root{
      /* üîÅ PARAMS DE CORES (trocar por cliente) */
      --grad-start: [GRADIENT_HEADER_START]; /* header & sticky-btn grad start */
      --grad-end:   [GRADIENT_HEADER_END];   /* header & sticky-btn grad end   */
      --cta1-start: [GRADIENT_CTA_START];    /* CTA grad start                 */
      --cta1-end:   [GRADIENT_CTA_END];      /* CTA grad end                   */
      --bar-fill:   [BAR_SOLID_COLOR];       /* cor da barra (preenchimento)   */
      --text-main:  [PRIMARY_TEXT_COLOR];    /* cor de texto predominante      */
      --footer-bg:  [FOOTER_BG];             /* bg do rodap√© fixo (s√≥lido)     */

      --muted:#777;
      --shadow:0 10px 25px rgba(0,0,0,.1);
      --radius:18px;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;background:#fff;color:#222;padding-bottom:80px}

    header{
      background: linear-gradient(135deg, var(--grad-start) 0%, var(--grad-end) 100%);
      padding:18px 18px 22px;text-align:center;border-radius:0 0 24px 24px;color:var(--text-main);
      box-shadow:var(--shadow);animation:hdrIn .6s ease both;
    }
    @keyframes hdrIn{from{opacity:0; transform:translateY(-8px)} to{opacity:1; transform:translateY(0)}}

    .logo-wrap{
      width:120px;height:120px;margin:0 auto 10px;border-radius:50%;background:#fff;display:flex;align-items:center;justify-content:center;
      box-shadow:0 8px 20px rgba(0,0,0,.2);overflow:hidden;
    }
    .logo-wrap img{width:100%;height:100%;object-fit:cover;object-position:center;border-radius:50%}

    /* (mantendo sua estrutura) */
    h1{font-size:28px;font-weight:800;margin-bottom:4px;color:#000}
    .subtitle{font-size:14px;color:#000;margin-bottom:10px}

    .cta-section{ text-align:center; margin:8px auto 0; padding:12px; max-width:700px; }

    .vacancy-wrap{max-width:600px;margin:4px auto 10px;text-align:center;}
    .vacancy-top{font-weight:800;font-size:16px;margin-bottom:6px;}

    .bar{width:100%;height:14px;background:#f9f9f9;border:2px solid #eee;border-radius:999px;position:relative;overflow:hidden}
    .bar>.fill{
      position:absolute;inset:0 100% 0 0;
      background: var(--bar-fill); /* ‚úÖ parametriz√°vel */
      border-radius:999px;transition:inset .5s ease;overflow:hidden
    }
    .bar>.fill::after{
      content:"";position:absolute; top:0; bottom:0; left:-40%; width:40%;
      background:linear-gradient(120deg, transparent 0%, rgba(255,255,255,.4) 50%, transparent 100%);
      transform:skewX(-20deg); animation:barSheen 2.2s linear infinite; pointer-events:none
    }
    @keyframes barSheen{from{left:-40%} to{left:110%}}

    /* 2.1 Micro-trust (acima do CTA) */
    .micro-trust{
      font-size:13.5px;
      font-weight:700;
      color:#666;
      margin:10px 0;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:6px;
    }
    .live-dot{
      width:8px; height:8px; border-radius:50%;
      background:#1fbf75;
      box-shadow:0 0 0 0 rgba(31,191,117,.55);
      animation:dotPulse 1.8s ease-out infinite;
    }
    @keyframes dotPulse{
      0%{box-shadow:0 0 0 0 rgba(31,191,117,.55);}
      70%{box-shadow:0 0 0 10px rgba(31,191,117,0);}
      100%{box-shadow:0 0 0 0 rgba(31,191,117,0);}
    }

    /* 2.2 CTA com setas + shine + halo */
    .cta-btn{
      position:relative; overflow:hidden;
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      width:100%; padding:14px 26px; border-radius:999px;
      font-weight:900; font-size:17px; color:#fff;
      background:linear-gradient(180deg, var(--cta1-start), var(--cta1-end));
      border:2px solid var(--grad-start);
      box-shadow:0 10px 25px rgba(0,0,0,.25);
      cursor:pointer;
    }

    .cta-btn::after{
      content:"";
      position:absolute; top:0; bottom:0; left:-25%;
      width:22%;
      background:linear-gradient(120deg, transparent 0%, rgba(255,255,255,.45) 50%, transparent 100%);
      transform:skewX(-20deg);
      animation:shine 3.5s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes shine{
      0%,60%{left:-25%;}
      70%{left:110%;}
      100%{left:110%;}
    }

    .cta-btn.attn-halo::before{
      content:"";
      position:absolute; inset:-4px; border-radius:999px;
      border:2px solid rgba(0,0,0,.18);
      filter:blur(2px);
      opacity:0; pointer-events:none;
      animation:haloPop 7s ease-in-out infinite;
    }
    @keyframes haloPop{
      0%,92%{opacity:0; transform:scale(1)}
      94%{opacity:1; transform:scale(1.03)}
      100%{opacity:0; transform:scale(1.08)}
    }

    .cta-icon{
      width:26px; height:26px; flex:0 0 26px;
      display:inline-flex; align-items:center; justify-content:center;
      filter: drop-shadow(0 0 6px rgba(255,255,255,.35));
    }
    .cta-icon svg{width:100%; height:100%;}
    .cta-icon path{
      stroke:#fff; stroke-width:4.2;
      stroke-linecap:round; stroke-linejoin:round; fill:none;
    }
    .cta-icon.left{ animation:arrowInLeft 1.5s ease-in-out infinite; }
    .cta-icon.right{ animation:arrowInRight 1.5s ease-in-out infinite; }
    @keyframes arrowInLeft{
      0%,60%,100%{transform:translateX(0); opacity:1;}
      70%{transform:translateX(4px); opacity:.95;}
    }
    @keyframes arrowInRight{
      0%,60%,100%{transform:translateX(0); opacity:1;}
      70%{transform:translateX(-4px); opacity:.95;}
    }

    .spinner{width:18px;height:18px;border:2px solid rgba(255,255,255,.35);border-top-color:#fff;border-radius:50%;display:none;animation:spin .7s linear infinite}
    .cta-btn.loading .spinner{display:inline-block}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* 2.3 Trust line */
    .trust-line{
      font-size:12px;
      color:#777;
      margin-top:8px;
      font-weight:600;
      text-align:center;
    }

    .feed{margin:16px auto 10px;max-width:500px;background:#f7f7f7;border:1px solid #eaeaea;border-radius:14px;padding:10px}
    .notif{display:flex;align-items:center;gap:10px;background:#fff;padding:10px;border-radius:10px;margin-bottom:8px;border:1px solid #eee;font-size:13.5px;font-weight:600;opacity:0;transform:translateY(-16px);animation:slideDown .4s ease forwards}
    .notif .badge{background:rgba(46,204,113,.15);border:1px solid rgba(46,204,113,.3);color:#1e8e3e;font-weight:800;font-size:12px;padding:6px 8px;border-radius:999px}
    @keyframes slideDown{to{opacity:1;transform:translateY(0)}}

    .benefits{max-width:700px;margin:6px auto;padding:0 12px}
    .benefit{display:flex;align-items:center;gap:12px;background:rgba(100,178,253,0.10);border-radius:14px;padding:12px;margin-bottom:12px;border:1px solid rgba(29,83,134,.35);box-shadow:0 4px 10px rgba(0,0,0,0.05);transform:translateY(10px); opacity:0}

    .emojibox{width:42px;height:42px;min-width:42px;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,var(--grad-start),var(--grad-end));border-radius:10px;font-size:20px;color:#fff}
    .benefit-text h4{font-size:16px;font-weight:800;margin-bottom:2px}
    .benefit-text p{font-size:13.5px;color:#777;margin:0}

    .sticky-footer{
      position:fixed;bottom:0;left:0;right:0;background:var(--footer-bg);color:#fff;
      padding:10px 14px;box-shadow:0 -8px 20px rgba(0,0,0,.2);
      display:flex;align-items:center;justify-content:space-between;z-index:50
    }
    .sticky-footer div{font-weight:700; font-size:14px;}
    .sticky-btn{
      background:linear-gradient(135deg, var(--grad-start), var(--grad-end));
      color:#000;
      border:none;border-radius:999px;padding:12px 20px;font-weight:800;font-size:14px;cursor:pointer;
      box-shadow:0 6px 16px rgba(0,0,0,.25);margin-left:8px;animation:footPulse 6s ease-in-out infinite;
      transition:filter .2s ease, transform .12s ease
    }
    .sticky-btn:hover{ filter:brightness(1.06); transform:scale(1.02) }
    @keyframes footPulse{0%,92%,100%{transform:scale(1)}95%{transform:scale(1.04)}98%{transform:scale(1.06)}}

    /* üîß patch anti-css antigo (CTA sempre vis√≠vel) */
    .cta-btn{ background:linear-gradient(180deg,var(--cta1-start),var(--cta1-end)) !important; color:#fff !important; }
    .cta-btn *{ color:#fff !important; }

    @media (prefers-reduced-motion: reduce){
      *, *::before, *::after{ animation: none !important; transition: none !important }
    }
  </style>
</head>

<body>
  <header>
    <div class="logo-wrap">
      <!-- üîÅ PARAM: [PROFILE_IMG_URL] -->
      <img src="[PROFILE_IMG_URL]" alt="[BRAND_NAME]">
    </div>

    <!-- üîÅ PARAM: [BRAND_NAME] -->
    <h1>[BRAND_NAME]</h1>
    <div class="subtitle">As melhores promo√ß√µes de casa, cozinha, beleza, moda e mais no seu WhatsApp.</div>
  </header>

  <section class="cta-section">
    <div class="vacancy-wrap">
      <div class="vacancy-top"><span id="vacancyText">√öltimas vagas de hoje ‚Ä¢ Restam 24 üëá</span></div>
      <div class="bar"><div class="fill" id="fillBar"></div></div>
    </div>

    <!-- 2.1 Prova social acima do CTA -->
    <div class="micro-trust">
      <span class="live-dot"></span> <strong>+7.500 membros</strong> ¬∑ <strong>üéØ 1 clique</strong> ¬∑ <strong>üö´ Sem spam</strong>
    </div>

    <!-- 2.2 Bot√£o principal com setas e shine (IDs/classes mantidos) -->
    <button id="ctaMain" class="cta-btn attn-halo" type="button">
      <span class="cta-icon left" aria-hidden="true">
        <svg viewBox="0 0 24 24" focusable="false" aria-hidden="true">
          <path d="M8 4 L16 12 L8 20" />
        </svg>
      </span>

      <span>ENTRAR GR√ÅTIS NO GRUPO</span>

      <span class="cta-icon right" aria-hidden="true">
        <svg viewBox="0 0 24 24" focusable="false" aria-hidden="true">
          <path d="M16 4 L8 12 L16 20" />
        </svg>
      </span>

      <span class="spinner" aria-hidden="true"></span>
    </button>

    <!-- 2.3 Linha de confian√ßa abaixo do bot√£o -->
    <p class="trust-line">üîí 100% seguro ¬∑ Link oficial do grupo ¬∑ Nenhum dado √© solicitado</p>

    <div class="feed" id="feed"></div>
  </section>

  <section class="benefits">
    <div class="benefit">
      <div class="emojibox">üî•</div>
      <div class="benefit-text">
        <h4>Descontos Insanos</h4>
        <p>Produtos com at√© 70% OFF</p>
      </div>
    </div>
    <div class="benefit">
      <div class="emojibox">üéü</div>
      <div class="benefit-text">
        <h4>Cupons Exclusivos</h4>
        <p>S√≥ para membros do grupo</p>
      </div>
    </div>
    <div class="benefit">
      <div class="emojibox">üëÄ</div>
      <div class="benefit-text">
        <h4>Itens em Alta</h4>
        <p>Os mais desejados do momento</p>
      </div>
    </div>
    <div class="benefit">
      <div class="emojibox">‚úÖ</div>
      <div class="benefit-text">
        <h4>Ofertas Verificadas</h4>
        <p>Promo√ß√µes reais e testadas</p>
      </div>
    </div>
  </section>

  <div class="sticky-footer">
    <div>‚è≥ √öltimas vagas de hoje</div>
    <button id="ctaFooter" class="sticky-btn" type="button">Entrar no grupo</button>
  </div>

  <!-- Script principal (UI + Lead dedupe + navega√ß√£o) -->
  <script>
    function uuidv4(){
      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {
        const r = Math.random()*16|0, v = c === 'x' ? r : (r&0x3|0x8);
        return v.toString(16);
      });
    }

    function boot(){
      // üîÅ PARAM: LINK dos dois bot√µes (principal e rodap√©)
      const WHATS_LINK="https://sndflw.com/i/mfpromos";

      const START_VACANCIES=24, MIN_VACANCIES=2;
      const feedEl=document.getElementById('feed');
      const vacancyText=document.getElementById('vacancyText');
      const fillBar=document.getElementById('fillBar');

      const NAMES_POOL=[
        "Francisca Lacerda","Ros√°lia Maria","Maria J√∫lia Souza","Ana Beatriz Nogueira","Josefa Almeida",
        "Tereza Lemos","Joana Prado","Helena Barbosa","Cec√≠lia Andrade","Laura Pacheco","Clara Moreira",
        "Isabel Figueira","Marta Azevedo","Aurora Fernandes","Ol√≠via Castro","Beatriz Siqueira",
        "L√∫cia Nunes","Ester Carvalho","Camila Duarte","Regina Campos","No√™mia Teixeira","Paula Rezende",
        "Marina Peixoto","Cristina Moura","Vit√≥ria Lopes","Sueli Brito","Rita Xavier","Elisa Cardoso",
        "Lorena Ribeiro","Gra√ßa Monteiro","Helena Antunes","Patr√≠cia Rocha","Juliana Costa","Madalena Correia",
        "Ad√©lia Vieira","Celina Pinto","Renata Tavares","Gabriela Melo","S√¥nia Gon√ßalves","Daniela Farias"
      ];
      function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}return arr;}
      let namesQueue=shuffle([...NAMES_POOL]);

      let currentVacancies = parseInt(localStorage.getItem("currentVacancies")) || START_VACANCIES;
      function normalizeDateStr(d){return new Date(d.getFullYear(), d.getMonth(), d.getDate()).toDateString();}
      const todayStr = normalizeDateStr(new Date());
      const lastResetDate = localStorage.getItem("lastResetDate");
      if (lastResetDate !== todayStr) { resetVacancies(); }
      scheduleMidnightReset();

      function resetVacancies(){
        currentVacancies = START_VACANCIES;
        localStorage.setItem("currentVacancies", currentVacancies);
        localStorage.setItem("lastResetDate", normalizeDateStr(new Date()));
        updateVacancyUI();
      }
      function scheduleMidnightReset(){
        const now = new Date();
        const nextMidnight = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0, 0);
        const msToMidnight = nextMidnight.getTime() - now.getTime();
        setTimeout(() => {
          resetVacancies();
          setInterval(resetVacancies, 24*60*60*1000);
        }, msToMidnight);
      }
      function updateVacancyUI(){
        if (!vacancyText || !fillBar) return;
        const prev = vacancyText.textContent;
        vacancyText.textContent=`√öltimas vagas de hoje ‚Ä¢ Restam ${currentVacancies} üëá`;
        if(prev !== vacancyText.textContent){
          vacancyText.style.transition = 'transform .12s ease';
          vacancyText.style.transform = 'scale(1.08)';
          setTimeout(()=>vacancyText.style.transform='scale(1)', 120);
        }
        const filled=(START_VACANCIES-currentVacancies)/(START_VACANCIES-MIN_VACANCIES);
        const pct=Math.max(0,Math.min(1,filled));
        fillBar.style.inset=`0 ${(1-pct)*100}% 0 0`;
      }
      function step(){
        if(currentVacancies<=MIN_VACANCIES) return;
        if(namesQueue.length===0) namesQueue=shuffle([...NAMES_POOL]);
        const name=namesQueue.shift();
        pushNotification(name);
        currentVacancies--;
        localStorage.setItem("currentVacancies", currentVacancies);
        updateVacancyUI();
        if(currentVacancies>MIN_VACANCIES){
          const nextMs=[1000,2000,3000][Math.floor(Math.random()*3)];
          setTimeout(step,nextMs);
        }
      }
      function pushNotification(name){
        if(!feedEl) return;
        const row=document.createElement('div');
        row.className='notif';
        row.innerHTML=`<div class="badge">‚úÖ</div><div><strong>${name}</strong> entrou no grupo</div>`;
        if(feedEl.firstChild){ feedEl.insertBefore(row,feedEl.firstChild); }
        else{ feedEl.appendChild(row); }
        if(feedEl.children.length>3){ feedEl.removeChild(feedEl.lastChild); }
      }

      // Reveal ao rolar (benef√≠cios)
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          if(e.isIntersecting){
            e.target.style.transition='transform .4s ease, opacity .4s ease';
            e.target.style.transform='translateY(0)';
            e.target.style.opacity='1';
            io.unobserve(e.target);
          }
        });
      },{threshold:0.12});
      document.querySelectorAll('.benefit').forEach(b=> io.observe(b));

      /* ===== CLICK ‚Üí LEAD (ANTI-DUP) ===== */
      const LEAD_LOCK_KEY = 'lead_lock_until';
      let leadFiredFlag = false;
      function canFireLead(){
        const now = Date.now();
        const lockUntil = parseInt(sessionStorage.getItem(LEAD_LOCK_KEY) || '0', 10);
        return (!leadFiredFlag) && (now > lockUntil);
      }
      function setLeadLock(ms=30000){
        sessionStorage.setItem(LEAD_LOCK_KEY, String(Date.now() + ms));
      }
      function trackLeadOnce(){
        if (!canFireLead()) return null;
        leadFiredFlag = true;
        setLeadLock(30000);
        const eventId = 'lead-' + uuidv4();
        try {
          // ‚úÖ Mantendo o evento oficial 'Lead' apenas no clique
          fbq('track','Lead', {}, { eventID: eventId });
        } catch(e){}
        return eventId;
      }

      // Redireciona direto para o link (evento no clique) ‚Äî micro-delay
      function openWhatsAppSmart(){
        trackLeadOnce();
        setTimeout(function(){
          window.location.assign(WHATS_LINK);
        }, 180);
      }

      function handleClick(e){
        const btn = e.currentTarget;
        if (btn.dataset.clicked === '1') return;
        btn.dataset.clicked = '1';

        btn.classList.add('loading');
        btn.setAttribute('disabled','true');

        openWhatsAppSmart();

        setTimeout(()=>{
          btn.classList.remove('loading');
          btn.removeAttribute('disabled');
          btn.dataset.clicked = '0';
        }, 4000);
      }

      const btnMain  = document.getElementById('ctaMain');
      const btnFoot  = document.getElementById('ctaFooter');
      if (btnMain) btnMain.addEventListener('click', handleClick);
      if (btnFoot) btnFoot.addEventListener('click', handleClick);

      // UI inicial
      updateVacancyUI();
      if(currentVacancies>MIN_VACANCIES){ setTimeout(step,1000); }
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', boot, { once:true });
    } else {
      boot();
    }
  </script>
</body>
</html>
